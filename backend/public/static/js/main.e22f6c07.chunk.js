(this["webpackJsonpbug-app"]=this["webpackJsonpbug-app"]||[]).push([[0],{33:function(e,t,n){e.exports=n(61)},60:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(30),c=n.n(l),u=n(1),o=n(2),i=n(4),s=n(3),m=n(5),h=n(7),d=n(12),p=n(8),g=n(15),f=n.n(g),b=f.a.create({withCredentials:!0}),E={query:function(e){return b.get("/api/bug/").then((function(e){return e.data})).catch((function(e){throw e}))},deleteBug:function(e){return console.log(e),b.delete("/api/bug/"+e).then((function(e){return e.data})).catch(prompt("could not delete!"))},addBug:function(e,t,n){return b.post("/api/bug/",{title:e,desc:t,sev:n}).then((function(e){return e.data}))},getBugById:function(e){return b.get("/api/bug/"+e).then((function(e){return e.data})).catch((function(e){throw e}))},editBug:function(e,t,n,a){var r={title:t,description:n,severity:a};return b.put("/api/bug/"+e,r).then((function(e){return e.data}))},getCreatorBugCount:function(e){return b.get("/api/bug/").then((function(e){return e.data})).then((function(t){return t.reduce((function(t,n){return n.creator.name===e?t+1:t}),0)}))}};var v=n(16),y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",description:"",severity:0},n.onSave=function(){n.props.onSave(n.state.title,n.state.description,n.state.severity).catch(),n.setState({name:"",imgUrl:""})},n.goBack=function(){n.props.history.push("/bugs/".concat(n.props.bug._id))},n.inputChange=function(e){var t=e.target.name;n.setState(Object(v.a)({},t,e.target.value))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setFormDataForEdit()}},{key:"componentDidUpdate",value:function(e){e.bug!==this.props.bug&&this.setFormDataForEdit()}},{key:"setFormDataForEdit",value:function(){var e=this.props.bug;e&&this.setState({title:e.title,description:e.description,severity:e.severity})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container flex column bug-form"},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",placeholder:"title",name:"title",onChange:this.inputChange,value:this.state.title}),r.a.createElement("label",null,"Description:"),r.a.createElement("input",{type:"text",placeholder:"bug description",name:"description",onChange:this.inputChange,value:this.state.description}),r.a.createElement("label",null,"Severity:"),r.a.createElement("input",{type:"number",placeholder:"severity",name:"severity",onChange:this.inputChange,value:this.state.severity}),r.a.createElement("div",{className:"flex justify-around"},r.a.createElement("button",{className:"btn",onClick:this.goBack},"Back"),r.a.createElement("button",{className:"btn",onClick:this.onSave},"Save")))}}]),t}(r.a.Component),j=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={bug:null},n.onEditBug=function(e,t,a){return E.editBug(n.state.bug._id,e,t,a).then((function(e){n.props.reLoad(),n.props.history.push("/bugs/"+e._id)}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadBug()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadBug()}},{key:"loadBug",value:function(){var e=this;E.getBugById(this.props.match.params.id).then((function(t){e.setState({bug:t})}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(y,{history:this.props.history,bug:this.state.bug,onSave:this.onEditBug}))}}]),t}(a.Component);var O={store:function(e,t){localStorage[e]=JSON.stringify(t)},load:function(e){var t=localStorage[e]||"null";return JSON.parse(t)}},k=f.a.create({withCredentials:!0}),C={checkCredentials:function(e){return k.post("api/user/",e).then((function(e){return e.data.answer})).then((function(e){return function(e){O.store("loggedinUser",e)}(e)}))},getLoggedinUser:function(){return O.load("loggedinUser")},query:function(){return k.get("api/user/").then((function(e){return e.data})).catch((function(e){return console.log(e)}))},logout:function(){return k.post("api/user/logout").then((function(){localStorage.clear()}))},getUserById:function(e){return k.get("api/user/"+e).then((function(e){return e.data}))}};var B=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={user:""},n.onLogout=function(){C.logout().then((function(){return n.props.history.push("/login")}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadLoggedinUser()}},{key:"loadLoggedinUser",value:function(){var e=C.getLoggedinUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return r.a.createElement("div",{className:"container logged-container"},"Welcome, ".concat(e?e.userName:"guest"),e&&r.a.createElement("button",{className:"btn logout",onClick:this.onLogout},"Logout"),e&&"admin"===e.userName&&r.a.createElement(h.b,{className:"btn logout",to:"/users/"},"Users List"))}}]),t}(a.Component),N=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={bug:null},n.goBack=function(){n.props.history.push("/bugs")},n.onDelete=function(){E.deleteBug(n.state.bug._id).then((function(){n.props.history.push("/bugs")}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadBug()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadBug()}},{key:"loadBug",value:function(){var e=this,t=this.props.match.params.id;E.getBugById(t).then((function(t){e.setState({bug:t})})).catch((function(t){e.props.history.push("/login")}))}},{key:"render",value:function(){if(!this.state.bug)return r.a.createElement("div",{className:"loading"},"Loading...");var e=this.state.bug;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"container"},r.a.createElement("tbody",{className:"table-fill"},r.a.createElement("tr",null,r.a.createElement("td",null,"createdAt"),r.a.createElement("td",null,e.createdAt)),r.a.createElement("tr",null,r.a.createElement("td",null,"Severity"),r.a.createElement("td",null,e.severity)),r.a.createElement("tr",null,r.a.createElement("td",null,"Title"),r.a.createElement("td",null,e.title)),r.a.createElement("tr",null,r.a.createElement("td",null,"Description"),r.a.createElement("td",null,e.description)),r.a.createElement("tr",null,r.a.createElement("td",null,"Creator's name"),r.a.createElement("td",null,e.creator.name)))),r.a.createElement("div",{className:"container action-btns flex justify-center"},r.a.createElement("button",{className:"btn",onClick:this.goBack},"BACK"),r.a.createElement(h.b,{to:"/bugs/".concat(e._id,"/edit")},r.a.createElement("button",{className:"btn"},"Edit")),this.loggedIn.userName===e.creator.name&&r.a.createElement("button",{className:"btn warning",onClick:this.onDelete},"Delete"),this.loggedIn.isAdmin&&r.a.createElement("button",{className:"btn warning",onClick:this.onDelete},"Delete")))}},{key:"loggedIn",get:function(){return C.getLoggedinUser()}}]),t}(a.Component);function w(e){var t=e.bug;return r.a.createElement("tr",null,r.a.createElement("td",null,t.severity),r.a.createElement("td",null,r.a.createElement(h.b,{to:"/bugs/".concat(t._id)},t.title)),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.creator.name))}function D(e){return r.a.createElement("table",null,r.a.createElement("tbody",{className:"table-fill"},r.a.createElement("tr",null,r.a.createElement("th",null,"Severity"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Creator")),e.bugs.map((function(e,t){return r.a.createElement(w,{key:t,bug:e})}))))}var S=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={bugs:null,filterBy:{name:"",numOfLegs:4}},n.loadBugs=function(){E.query(n.state.filterBy).then((function(e){n.setState({bugs:e})})).catch((function(e){n.props.history.push("/login")}))},n.onFilter=function(e){n.setState({filterBy:e},n.loadBugs)},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadBugs()}},{key:"render",value:function(){var e=this;return this.state.bugs?r.a.createElement(d.b,{history:this.props.history},r.a.createElement(B,{history:this.props.history}),r.a.createElement(d.c,null,r.a.createElement(d.a,{component:N,path:"/bugs/:id",exact:!0}),r.a.createElement(d.a,{render:function(t){return r.a.createElement(j,Object.assign({},t,{reLoad:e.loadBugs}))},path:"/bugs/:id/edit",exact:!0}),r.a.createElement(d.a,{path:"/bugs"},r.a.createElement("section",{className:"container"},r.a.createElement(D,{bugs:this.state.bugs}))))):r.a.createElement("div",null,"Loading....")}}]),t}(a.Component),U=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={userName:"",password:""},n.inputChange=function(e){var t=e.target.name;n.setState(Object(v.a)({},t,e.target.value))},n.onLogin=function(e){e.preventDefault(),C.checkCredentials(n.state).then((function(){return n.props.history.push("/bugs")}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"login-container"},r.a.createElement("form",{className:"flex column justify-center"},r.a.createElement("input",{type:"text",placeholder:"username",name:"userName",onChange:this.inputChange,value:this.state.name}),r.a.createElement("input",{type:"password",placeholder:"password",name:"password",onChange:this.inputChange}),r.a.createElement("button",{onClick:this.onLogin},"Login")))}}]),t}(a.Component);function L(e){return r.a.createElement("nav",null,r.a.createElement("ul",{className:"main-menu clean-list flex justify-around align-center"},r.a.createElement("li",null,r.a.createElement("h1",null,r.a.createElement(h.b,{to:"/bugs"},"Bugs"))),r.a.createElement("li",null,r.a.createElement(h.c,{activeClassName:"active",to:"/login",exact:!0},"Login")),r.a.createElement("li",null,r.a.createElement(h.c,{activeClassName:"active",to:"/bugs",exact:!0},"Bugs"))))}var A=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={user:null,bugCnt:0},n.goBack=function(){n.props.history.push("/users")},n.onDelete=function(){C.deleteUser(n.state.user._id).then((function(){n.props.history.push("/users")}))},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadBug()}},{key:"componentDidUpdate",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadBug()}},{key:"loadBug",value:function(){var e=this,t=this.props.match.params.id;C.getUserById(t).then((function(t){e.setState({user:t}),E.getCreatorBugCount(t.userName).then((function(t){return e.setState({bugCnt:t})}))}))}},{key:"render",value:function(){if(!this.state.user)return r.a.createElement("div",{className:"loading"},"Loading...");var e=this.state.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement("table",{className:"container"},r.a.createElement("tbody",{className:"table-fill"},r.a.createElement("tr",null,r.a.createElement("td",null,"User name"),r.a.createElement("td",null,e.userName)),r.a.createElement("tr",null,r.a.createElement("td",null,"password"),r.a.createElement("td",null,e.password)),r.a.createElement("tr",null,r.a.createElement("td",null,"is Admin?"),r.a.createElement("td",null,e.isAdmin?"Yes":"No")),r.a.createElement("tr",null,r.a.createElement("td",null,"Bugs count"),r.a.createElement("td",null,this.state.bugCnt)))),r.a.createElement("div",{className:"container action-btns flex justify-center"},r.a.createElement("button",{className:"btn",onClick:this.goBack},"BACK"),r.a.createElement("button",{className:"btn warning",onClick:this.onDelete},"Delete")))}},{key:"loggedIn",get:function(){return C.getLoggedinUser()}}]),t}(a.Component);function x(e){return C.getLoggedinUser()?e.history.push("/bugs"):e.history.push("/login"),"Not Found"}var F=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(h.b,{to:"/users/".concat(e.user._id)},e.user.userName)),r.a.createElement("td",null,e.user.password),r.a.createElement("td",null,e.user.isAdmin?"Yes":"No"))}}]),t}(a.Component);function I(e){return r.a.createElement("table",null,r.a.createElement("tbody",{className:"table-fill"},r.a.createElement("tr",null,r.a.createElement("th",null,"User Name"),r.a.createElement("th",null,"Password"),r.a.createElement("th",null,"Admin?")),e.users.map((function(e){return r.a.createElement(F,{key:e._id,user:e})}))))}var _=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(i.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state={users:null},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this;C.query().then((function(t){return e.setState({users:t})})).catch((function(e){return alert(e)}))}},{key:"render",value:function(){return Array.isArray(this.state.users)?r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"Users"),console.log(this.state.users),r.a.createElement(I,{users:this.state.users})):r.a.createElement("div",null,"Loading....")}}]),t}(a.Component),M=(n(60),Object(p.a)()),q=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(h.a,{history:M},r.a.createElement(L,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{component:U,path:"/login"}),r.a.createElement(d.a,{component:_,path:"/users",exact:!0}),r.a.createElement(d.a,{component:A,path:"/users/:id/",exact:!0}),r.a.createElement(d.a,{component:S,path:"/bugs"}),r.a.createElement(d.a,{component:x,path:"/"}))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[33,1,2]]]);
//# sourceMappingURL=main.e22f6c07.chunk.js.map